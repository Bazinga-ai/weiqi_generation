clear all, close all

img_filename = 'img/qipu_test.jpg';
img = imread(img_filename);

figure;
imshow(img);

% img_hsv = rgb2hsv(img);
% img_h = img_hsv(:,:,1);
% 
% figure;
% imshow(img_h);
% 
% img_h = medfilt2(img_h,[3 3]);
% 
% level = graythresh(img_h);
% img_bw = im2bw(img_h,level);
% 
% figure;
% imshow(img_bw);

% image position
zero_point_x = 13;
zero_point_y = 18;
panel_x = 668;
panel_y = 683;
unit = 18;
qizi_size_x = panel_x / unit;
qizi_size_y = panel_y / unit;

qizi_center_x_vec = [];
qizi_center_y_vec = [];
for m = 1 : (unit + 1)
    qizi_center_x_vec = [qizi_center_x_vec (m * qizi_size_x + zero_point_x)];
    qizi_center_y_vec = [qizi_center_y_vec (m * qizi_size_y + zero_point_y)];
end

for x = 1 : unit 
    for y = 1 : unit
        c_x = qizi_center_x_vec(x);
        c_y = qizi_center_x_vec(y);
        left = c_x - qizi_size_x / 2;
        if left < 0
            left = 0;
        end
        right = c_x + qizi_size_x / 2;
        if right > 
        top = c_y - qizi_size_y / 2;
        bottom = c_y + qizi_size_y / 2;
        sub_image(x,y) = image(left:right,top:bottom)
    end
end

figure;
imshow(sub_image(1,1));
        